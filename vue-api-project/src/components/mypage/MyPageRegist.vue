<template>
  <div class="container mt-5">
    <h5 class="text-center">ì¶”ê°€ ì •ë³´ ë“±ë¡ ğŸ¾</h5>
    <form class="col-md-6 offset-md-3 mt-4">
      <div class="mb-3">
        <label for="age" class="form-label">ë‚˜ì´</label>
        <div class="input-group">
          <input type="number" class="form-control" id="age" v-model="age" />
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label">ì„±ë³„</label>
        <div class="form-check">
          <input type="radio" class="form-check-input" id="female" v-model="gender" value="female" />
          <label class="form-check-label" for="female">ì—¬ì„±</label>
        </div>
        <div class="form-check">
          <input type="radio" class="form-check-input" id="male" v-model="gender" value="male" />
          <label class="form-check-label" for="male">ë‚¨ì„±</label>
        </div>
      </div>
      <div class="mb-3">
        <label for="self_intro" class="form-label">ìê¸°ì†Œê°œ í•œì¤„</label>
        <input type="textarea" class="form-control" id="self_intro" v-model="self_intro" />
      </div>
      <div class="mb-3">
        <label for="city" class="form-label">ì‹œ(ë„)</label>
        <select class="form-select" id="city" v-model="address">
          <option value="" disabled selected>ì‹œ(ë„)ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
          <option value="ì„œìš¸íŠ¹ë³„ì‹œ">ì„œìš¸íŠ¹ë³„ì‹œ</option>
          <option value="ì¸ì²œê´‘ì—­ì‹œ">ì¸ì²œê´‘ì—­ì‹œ</option>
          <option value="ë¶€ì‚°ê´‘ì—­ì‹œ">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
          <option value="ëŒ€êµ¬ê´‘ì—­ì‹œ">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
          <option value="ê´‘ì£¼ê´‘ì—­ì‹œ">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
          <option value="ëŒ€ì „ê´‘ì—­ì‹œ">ëŒ€ì „ê´‘ì—­ì‹œ</option>
          <option value="ìš¸ì‚°ê´‘ì—­ì‹œ">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
          <option value="ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
          <option value="ê²½ê¸°ë„">ê²½ê¸°ë„</option>
          <option value="ê°•ì›ë„">ê°•ì›ë„</option>
          <option value="ì¶©ì²­ë¶ë„">ì¶©ì²­ë¶ë„</option>
          <option value="ì¶©ì²­ë‚¨ë„">ì¶©ì²­ë‚¨ë„</option>
          <option value="ì „ë¼ë¶ë„">ì „ë¼ë¶ë„</option>
          <option value="ì „ë¼ë‚¨ë„">ì „ë¼ë‚¨ë„</option>
          <option value="ê²½ìƒë¶ë„">ê²½ìƒë¶ë„</option>
          <option value="ê²½ìƒë‚¨ë„">ê²½ìƒë‚¨ë„</option>
          <option value="ì œì£¼íŠ¹ë³„ìì¹˜ë„">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">ì„ í˜¸ ìŠ¤í¬ì¸  1ìˆœìœ„</label>
        <div class="form-check">
          <input type="radio" class="form-check-input" id="soccer" v-model="fav_sport" value="soccer" />
          <label class="form-check-label" for="soccer">ì¶•êµ¬</label>
        </div>
        <div class="form-check">
          <input type="radio" class="form-check-input" id="baseball" v-model="fav_sport" value="baseball" />
          <label class="form-check-label" for="baseball">ì•¼êµ¬</label>
        </div>
        <div class="form-check">
          <input type="radio" class="form-check-input" id="basketball" v-model="fav_sport" value="basketball" />
          <label class="form-check-label" for="basketball">ë†êµ¬</label>
        </div>
        <div class="form-check">
          <input type="radio" class="form-check-input" id="volleyball" v-model="fav_sport" value="volleyball" />
          <label class="form-check-label" for="volleyball">ë°°êµ¬</label>
        </div>
      </div>

      <div class="mb-3">
        <label for="profile_image" class="form-label">í”„ë¡œí•„ ì´ë¯¸ì§€</label>
        <div class="image-list" style="display: flex;">
          <div v-for="(image, index) in imageList" :key="index" @click="selectImage(index)" class="image-item">
            <!-- ì •ì  ì´ë¯¸ì§€ íŒŒì¼ ê²½ë¡œ ì‚¬ìš© -->
            <img :src="`/profileimg/${image.name}.jpg`" alt="í”„ë¡œí•„ ì´ë¯¸ì§€" 
                  :style="{ cursor: 'pointer' }" class="hoverable" />
            {{ image.name }}
          </div>
        </div>
        <div class="form-text" v-if="selectedImage">ì„ íƒëœ ì´ë¯¸ì§€: {{ selectedImage.name }}</div>
      </div>
      <button type="button" class="btn btn-success" @click="registMypage">ë“±ë¡</button>
    </form>
  </div>
</template>

<script setup>
import { ref } from "vue";
import { useUserStore } from "@/stores/user";
// import { useRouter } from "vue-router";

const store = useUserStore();

// const router = useRouter();

const age = ref("");
const gender = ref("");
const self_intro = ref("");
const address = ref("");
const fav_sport = ref("");

const imageList = ref([
  { name: 'cutecat', url: '/profileimg/cutecat.jpg' },
  { name: 'hipcat', url: '/profileimg/hipcat.jpg' },
  { name: 'santacat', url: '/profileimg/santacat.jpg' },
  { name: 'sleepycat', url: '/profileimg/sleepycat.jpg' },
  { name: 'taehuncat', url: '/profileimg/taehuncat.jpg' },
]);

const selectedImage = ref("");

const selectImage = (index) => {
  selectedImage.value = imageList.value[index];
};

const registMypage = () => {
  const mypageUser = {
    age: age.value,
    gender: gender.value,
    self_intro: self_intro.value,
    address: address.value,
    fav_sport: fav_sport.value,
    user_id: store.loginUserObj.user_id, 
    profile_image: selectedImage.value.url,
  };

  mypageUser.gender = gender.value === "female" ? 1 : 0;

  switch (fav_sport.value) {
    case "soccer":
      mypageUser.fav_sport = "ì¶•êµ¬";
      break;
    case "baseball":
      mypageUser.fav_sport = "ì•¼êµ¬";
      break;
    case "basketball":
      mypageUser.fav_sport = "ë†êµ¬";
      break;
    case "volleyball":
      mypageUser.fav_sport = "ë°°êµ¬";
      break;
  }

  mypageUser.profile_image = selectedImage.value.url;

  store.signupMypage(mypageUser);
}


</script>

<style scoped>
.image-list {
  display: flex;
}

.image-item {
  margin-right: 10px;
}

.image-item img {
  width: 100px;
  height: 100px;
  object-fit: cover;
  transition: transform 0.2s, border-color 0.2s; 
}

.image-item img:hover {
  transform: scale(1.1); 
  border: 2px solid rgb(0, 0, 0); 
}

.form-text {
  margin-top: 10px;
}

.hoverable {
  cursor: pointer;
}

</style>